<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>ameliejiang</title>
	<meta name="keywords" content="ameliejiang">
	<meta name="description" content="ameliejiang">
	<meta name="author" content="ken,kenchung.ftd@gmail.com">
	<meta name="copyright" content="广州玑域信息科技有限公司">
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
	<link rel="stylesheet" href="css/normalize.css">
	<link rel="stylesheet" href="css/base.css">
	<link rel="stylesheet" href="css/index.css">
</head>
<body>
	<header class="md-header">
		<img src="images/work.jpg" class="banner">
		<img src="images/title.png" class="title">
		<div>
			<ul>
				<li>
					<a href="index.html" class="left active"><img src="images/link_work.png"></a>
				</li>
				<li>
					<a href="about.html" class="center"><img src="images/link_about.png"></a>
				</li>
				<li>
					<a href="contact.html" class="right"><img src="images/link_contact.png"></a>
				</li>
			</ul>
		</div>
	</header>
	<section class="md-gallery">
		<div class="gallery-container">
			<ul>
				<li><a href=""><img src="images/1.jpg"></a></li>
				<li><a href=""><img src="images/2.jpg"></a></li>
				<li><a href=""><img src="images/3.jpg"></a></li>
				<li><a href=""><img src="images/4.jpg"></a></li>
				<li><a href=""><img src="images/5.jpg"></a></li>
				<li><a href=""><img src="images/6.jpg"></a></li>
				<li><a href=""><img src="images/7.jpg"></a></li>
				<li><a href=""><img src="images/8.jpg"></a></li>
				<li><a href=""><img src="images/9.jpg"></a></li>
			</ul>
		</div>
	</section>
	<section class="show-pic">
		<div><img src="images/1.jpg"></div>
		<a href="" class="left-arrow"><img src="images/left_arrow.png"></a>
		<a href="" class="right-arrow"><img src="images/right_arrow.png"></a>
		<a href="" class="back-btn"><img src="images/back.png"></a>
	</section>
	<div class="mask"></div>
	<footer class="md-footer"></footer>
	<script src="lib/jquery-1.12.0.min.js"></script>
	<script>
		$(function() {

			$('.gallery-container').on('click', 'a', function(event) {
				$(this).parent().addClass('active-img');
				$('.show-pic>div>img').attr('src', $(this).find('img')[0].src);
				$('.show-pic').show();
				if ($('.show-pic>div>img').height() > 500) {
					$('.show-pic>div').css('overflow-x', 'hidden');
				} else {
					$('.show-pic>div').css('overflow-x', '')
				}
				$('.mask').show();
				return false;
			});

			$('.show-pic').mouseover(function(event) {
				$('.show-pic a').show();
			});
			$('.show-pic').mouseout(function(event) {
				$('.show-pic a').hide();
			});
			$('.back-btn').click(function(event) {
				$('.show-pic').hide();
				$('.mask').hide();
				$('.gallery-container li').removeClass();
				return false;
			});
			$('.left-arrow').click(function(event) {
				var $nowImg = $('.active-img');
				if($nowImg.prev().length) {
					$nowImg.prev().addClass('active-img').end().removeClass();
					$('.show-pic>div>img').attr('src', $('.active-img').find('img')[0].src);
				}
				if ($('.show-pic>div>img').height() > 500) {
					$('.show-pic>div').css('overflow-x', 'hidden');
				} else {
					$('.show-pic>div').css('overflow-x', '')
				}
				return false;
			});
			$('.right-arrow').click(function(event) {
				var $nowImg = $('.active-img');
				if($nowImg.next().length) {
					$nowImg.next().addClass('active-img').end().removeClass();
					$('.show-pic>div>img').attr('src', $('.active-img').find('img')[0].src);
				}
				if ($('.show-pic>div>img').height() > 500) {
					$('.show-pic>div').css('overflow-x', 'hidden');
				} else {
					$('.show-pic>div').css('overflow-x', '')
				}
				return false;
			});



			var $mainDiv = $(".gallery-container ul");
			var html = '';
			var displayedImg = 9;
			var allImg = 39;
			var oldPic;
			var scrollTime = 0
			$(window).scroll(function(event) {
				var pageH = $(document).height()
            	var scrollT = $(window).scrollTop(); //滚动条top   
            	var winheight=$(window).height();
            	if ((parseInt(scrollT)+parseInt(winheight)+290>=parseInt(pageH))&&(displayedImg<allImg)) {
            		scrollTime++;
            		oldPic = displayedImg;
            		displayedImg = allImg - oldPic>9 ? oldPic+9 : allImg;
            		for (var i = oldPic+1; i < displayedImg+1; i++) {
            			html += '<li><a href=""><img src="images/'+i+'.jpg"></a></li>';
            		};

            		$mainDiv.append(html);
            		html = '';
            	}
            });

		});
</script>
</body>
</html>